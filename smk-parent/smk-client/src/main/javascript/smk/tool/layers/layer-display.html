<div class="smk-folder">
    <template
        v-for="item in items"
    >
        <div class="smk-item"
            v-bind:class="{ 
                'smk-visible': item.isVisible,
                'smk-expanded': item.isExpanded 
            }"
        >
            <i class="smk-folder-expand material-icons smk-command smk-icon"
                v-if="item.isExpanded != null"
                v-bind:title="'Expand ' + item.title"
                v-on:click="$$emit( 'set-folder-expanded', { id: item.folderId, expanded: !item.isExpanded } )"
            >{{ item.isExpanded ? 'arrow_drop_down' : 'arrow_right' }}</i>

            <i class="smk-visibility material-icons smk-command smk-icon"
                v-bind:title="'Toggle visibility of \'' + item.title + '\''"
                v-on:click="$$emit( 'set-item-visible', { id: item.layerId || item.folderId, visible: !item.isVisible } )"
            >{{ item.isVisible ? 'visibility' : 'visibility_off' }}</i>

            <span class="smk-title"
                v-bind:title="'ID: ' + ( item.layerId || item.folderId )"
                v-bind:class="{
                    'smk-obscured': !item.isActuallyVisible
                }"
            >{{ item.title }}</span>

            <!-- <div class="smk-layer-info" v-if="legend && item.hasLegend">
                <div class="smk-legend">
                    <span v-if="item.legends == 'waiting'">Requesting</span>
                    <div v-for="legend in item.legends">
                        <img v-bind:src="legend.url">
                        <span>{{ legend.title }}</span>
                    </div>
                </div>
            </div> -->
        </div>

        <layer-display
            v-if="item.isExpanded"
            v-bind:items="item.items"
            v-bind:id="id"
        ></layer-display>
    </template>
</div>
